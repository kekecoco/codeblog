#### CPU上下文切换
##### 0X01 CPU上下文切换是什么意思
1. Linux是一个多任务系统,它支持远大于CPU数量的任务运行.这些任务实际上并不是真的在同时运行,而是因为系统在很短的时间内,将CPU轮流分配给它们,
造成多任务运行的错觉.
2. 每个任务在运行前需要系统事先帮助设置好CPU寄存器和程序计数器.  
    + CPU寄存器,是CPU内置的容量小,但速度极快的内存.
    + 程序计数器,是存储CPU正在执行的指令的位置.或者是即将执行的下一条指令的位置.
3. CPU寄存器和程序计数器都是CPU在运行任何任务前,必须依赖的环境,因此也被叫做CPU上下文.
4. CPU上下文切换是先把前一个任务的CPU上下文保存起来,然后加载新任务的上下文到这些寄存器和程序寄存器,最后在跳转到所指的新位置,运行新的程序.
5. 根据任务的不同,CPU上下文切换可以分为几个不同的场景,进程上下文切换,线程上下文切换和中断上下文切换.
6. 过多的上下文切换,会把CPU时间消耗在寄存器,内核栈以及虚拟内存等数据的保存和恢复上,从而缩短程序运行的真正时间,导致系统的整体性能大幅下降.
